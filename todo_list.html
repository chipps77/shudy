<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å¾…è¾¦æ¸…å–®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <style>
    .todo-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      width: 100%;
      max-width: 500px;
      background-color: #f5f5f5;
      border: 4px solid #000;
      border-radius: 24px;
      padding: 40px;
      box-shadow: 8px 8px 0 #000;
    }

    #todoInput {
      padding: 10px;
      font-size: 14px;
      width: 80%;
      border: 2px solid #000;
      border-radius: 8px;
      box-shadow: 2px 2px 0 #000;
    }

    .todo-item.done span {
      text-decoration: line-through;
      color: #888;
    }

    #todoList {
      list-style: none;
      padding: 0;
      width: 80%;
    }

    #todoList li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: #fff;
  border: 2px solid #000;
  border-radius: 8px;
  padding: 10px;
  margin-bottom: 10px;
  box-shadow: 3px 3px 0 #000;
  cursor: pointer;
  gap: 8px;
  flex-wrap: wrap;
}

#todoList li span {
  flex: 1;
}

#todoList li button {
  font-size: 14px;
  padding: 4px 8px;
  border: 1px solid #000;
  border-radius: 4px;
  background-color: #eee;
  cursor: pointer;
  box-shadow: 2px 2px 0 #000;
}

    .back-button {
      position: fixed;
      top: 16px;
      left: 16px;
      z-index: 1000;
      padding: 6px 12px;
      font-size: 14px;
      font-family: monospace;
      border: 2px solid #000;
      border-radius: 6px;
      background-color: #fff;
      box-shadow: 3px 3px 0 #000;
    }
  </style>
</head>
<body>
  <button class="back-button" onclick="goBack()">å›é¦–é </button>
  <div class="main-wrapper">
    <div class="todo-wrapper">
      <h1>to do list</h1>
      <ul id="todoList"></ul>
      <div style="display: flex; gap: 10px; margin-top: 10px;">
  <input type="text" id="todoInput" placeholder="è¼¸å…¥ä¸€ä»¶äº‹..." />
  <button onclick="addTodo()">æ–°å¢</button>
  <button onclick="deleteSelected()">åˆªé™¤å·²å®Œæˆé …ç›®</button>
</div>
    </div>
  </div>

  <script>
   function deleteSelected() {
  const list = JSON.parse(localStorage.getItem("todoList") || "[]");
  const doneItems = list.filter(item => item.done);
  if (doneItems.length === 0) {
    alert("ç›®å‰æ²’æœ‰å·²å®Œæˆé …ç›®å¯åˆªé™¤ã€‚");
    return;
  }
  if (confirm(`å°‡åˆªé™¤ ${doneItems.length} é …å·²å®Œæˆäº‹é …ï¼Œæ˜¯å¦ç¹¼çºŒï¼Ÿ`)) {
    const newList = list.filter(item => !item.done);
    localStorage.setItem("todoList", JSON.stringify(newList));
    renderTodo();
  }
}

    function addTodo() {
      const input = document.getElementById("todoInput");
      const text = input.value.trim();
      if (!text) return;

      const item = {
        text,
        done: false
      };

      const list = JSON.parse(localStorage.getItem("todoList") || "[]");
      list.push(item);
      localStorage.setItem("todoList", JSON.stringify(list));
      input.value = "";
      renderTodo();
    }

    function toggleDone(index) {
      const list = JSON.parse(localStorage.getItem("todoList") || "[]");
      list[index].done = !list[index].done;
      localStorage.setItem("todoList", JSON.stringify(list));
      renderTodo();
    }

    function renderTodo() {
  const list = JSON.parse(localStorage.getItem("todoList") || "[]");
  const ul = document.getElementById("todoList");
  ul.innerHTML = "";

  list.forEach((item, index) => {
    const li = document.createElement("li");
    li.className = item.done ? "todo-item done" : "todo-item";

    const span = document.createElement("span");
    span.textContent = item.text;

    // åˆ‡æ›å®Œæˆç‹€æ…‹
    li.onclick = () => toggleDone(index);

    // ç·¨è¼¯æŒ‰éˆ•
    const editBtn = document.createElement("button");
    editBtn.textContent = "âœï¸";
    editBtn.onclick = (e) => {
      e.stopPropagation();
      const newText = prompt("ä¿®æ”¹å…§å®¹ï¼š", item.text);
      if (newText !== null) {
        list[index].text = newText.trim();
        localStorage.setItem("todoList", JSON.stringify(list));
        renderTodo();
      }
    };

    // åˆªé™¤æŒ‰éˆ•
    const deleteBtn = document.createElement("button");
    deleteBtn.textContent = "ğŸ—‘ï¸";
    deleteBtn.onclick = (e) => {
      e.stopPropagation();
      if (confirm("ç¢ºå®šè¦åˆªé™¤é€™ä¸€é …å—ï¼Ÿ")) {
        list.splice(index, 1);
        localStorage.setItem("todoList", JSON.stringify(list));
        renderTodo();
      }
    };

    li.appendChild(span);
    li.appendChild(editBtn);
    li.appendChild(deleteBtn);
    ul.appendChild(li);
  });
}  
function goBack() {
      window.location.href = "index.html";
    }

    window.onload = renderTodo;
  </script>
</body>
</html>

